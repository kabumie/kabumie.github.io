<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    归档: 2017
  
</title>

<meta name="description" content="web前端开发 ACG">
<meta property="og:type" content="website">
<meta property="og:title" content="kabumie 的博客">
<meta property="og:url" content="http://yoursite.com/archives/2017/index.html">
<meta property="og:site_name" content="kabumie 的博客">
<meta property="og:description" content="web前端开发 ACG">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="kabumie 的博客">
<meta name="twitter:description" content="web前端开发 ACG">




  <link rel="icon" href="kabumie.github.io/images/timg.jpg">


<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">
<link rel="stylesheet" href="/styles/main.css">






</head>
<body
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">kabumie 的博客</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">kabumie 的博客</a></h1>
    
      <p class="subtitle">
        其实这里是要写点诗词名言什么的
      </p>
    
    <div class="info">
      <div class="content">
        
          <div class="description">web前端开发 ACG</div>
        
        
          <div class="author">kabumie</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="https://avatars1.githubusercontent.com/u/25236999?v=3&amp;s=460"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">分类</a>
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">2</span></li></ul>
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">标签</a>
                <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html-css/">html&css</a><span class="tag-list-count">1</span></li></ul>
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">归档</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">2</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="主页">主页</a>
              </li>
            
          
            
              <li>
                <a href="/archives" title="年历">年历</a>
              </li>
            
          
            
              <li>
                <a href="/about" title="关于">关于</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="https://github.com/kabumie" title="Github" target="_blank" rel="external">Github</a>
              </li>
            
          
            
              <li>
                <a href="https://www.jianshu.com/u/475bf842b589" title="简书" target="_blank" rel="external">简书</a>
              </li>
            
          
            
              <li>
                <a href="https://my.oschina.net/u/3300709/blog" title="开源中国" target="_blank" rel="external">开源中国</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          

  
  
    
      
      
      <section class="archives-wrap">
        <div class="archive-year-wrap">
          <h1><a href="/archives/2017" class="archive-year">2017</a></h1>
        </div>
        <div class="post-list">
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2017/03/01/弹性布局/" >
  弹性布局
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2017/03/01/弹性布局/"><span class="article-date">
  2017-03-01
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html-css/">html&css</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>传统布局基于盒子模型，通过 display float position 属性进行布局，但是有些效果在盒模型下不好实现，比如垂直方向居中。</li>
<li>2009年 W3C 提出Flex布局，主流浏览器均可支持，其中IE浏览器在IE10之后开始支持</li>
</ul>
<h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><h4 id="Flex容器"><a href="#Flex容器" class="headerlink" title="Flex容器"></a>Flex容器</h4><ul>
<li>采用Flex布局的元素，称为Flex容器(flex container)。它的所有子元素自动成为容器成员，称为Flex项目(flex item)</li>
<li>给元素添加 display: flex 属性使元素成为Flex容器，即开启了弹性布局，行内元素也可用 display: inline-flex; 成为Flex容器</li>
<li>开启弹性布局后Flex容器的子元素的 float clear vertical-align 属性将失效</li>
</ul>
<h4 id="主轴和副轴"><a href="#主轴和副轴" class="headerlink" title="主轴和副轴"></a>主轴和副轴</h4><ul>
<li>在Flex容器内使用主轴和副轴概念；默认x轴为主轴，y轴为副轴；可由Flex容器的 flex-direction 属性修改</li>
<li>主轴副轴中有起始位置的概念，默认的起始位置为x轴的左侧y轴的上侧</li>
<li>在使用弹性布局时，需要通过主轴和副轴确定编辑的方向，Flex容器内的元素默认会处于类似 float 的状态，例html结构如下：<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pink"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"green"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"blue"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>当主轴为x轴时：<br><img src="https://kabumie.github.io/images/md_img/1.PNG" alt="主轴为x轴的效果图"></p>
<p>当主轴为y轴时：<br><img src="https://kabumie.github.io/images/md_img/6.png" alt="主轴为y轴的效果图"></p>
<p>即主轴方向决定了容器内元素的排列方向</p>
</blockquote>
<h3 id="容器属性"><a href="#容器属性" class="headerlink" title="容器属性"></a>容器属性</h3><blockquote>
<p>flex-direction<br>flex-wrap<br>flex-flow<br>justify-content<br>align-items<br>align-content</p>
</blockquote>
<h4 id="1-flex-direction"><a href="#1-flex-direction" class="headerlink" title="1. flex-direction"></a>1. flex-direction</h4><p>设置主轴方向<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">  <span class="attribute">flex-direction</span>: row | row-reverse | column | column-reverse;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>row(默认值)：主轴为x轴，起始位置为左<br><img src="https://kabumie.github.io/images/md_img/3.png" alt="row效果图"></p>
<p>row-reverse：主轴为x轴，起始位置为右<br><img src="https://kabumie.github.io/images/md_img/4.png" alt="row-reverse效果图"></p>
<p>column：主轴为y轴，起始位置为上<br><img src="https://kabumie.github.io/images/md_img/5.png" alt="column效果图"></p>
<p>column-reverse：主轴为y轴，起始位置为下<br><img src="https://kabumie.github.io/images/md_img/2.PNG" alt="column-reverse效果图"></p>
</blockquote>
<h4 id="2-flex-wrap"><a href="#2-flex-wrap" class="headerlink" title="2. flex-wrap"></a>2. flex-wrap</h4><p>设置可换行属性，默认下容器内子元素会按照主轴方向排一行，不会换行，当总长度超过容器时子元素会被压缩，通过 flex-wrap 属性可设置换行模式<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span>&#123;</div><div class="line">  <span class="attribute">flex-wrap</span>: nowrap | wrap | wrap-reverse;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>nowrap(默认值)：不换行，width设置为22%的6个子元素被压缩在一行<br><img src="https://kabumie.github.io/images/md_img/no-wrap.png" alt="nowrap效果图"></p>
<p>wrap：换行，第一行从最上侧开始<br><img src="https://kabumie.github.io/images/md_img/wrap.jpg" alt="wrap效果图"></p>
<p>wrap-reverse：换行，第一行从最底部开始<br><img src="https://kabumie.github.io/images/md_img/wrap-reverse.jpg" alt="wrap-reverse效果图"></p>
</blockquote>
<h4 id="3-flex-flow"><a href="#3-flex-flow" class="headerlink" title="3. flex-flow"></a>3. flex-flow</h4><p>flex-direction 和 flex-wrap 的联写模式<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">  <span class="attribute">flex-flow</span>: &lt;flex-direction&gt; || &lt;flex-wrap&gt;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="4-justify-content"><a href="#4-justify-content" class="headerlink" title="4. justify-content"></a>4. justify-content</h4><p>设置主轴方向的对其方式<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">  <span class="attribute">justify-content</span>: flex-start | flex-end | center | space-between | space-around;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>flex-start(默认值)：左对齐<br>flex-end：右对齐<br>center： 居中<br>space-between：两端对齐，项目之间的间隔都相等。<br>space-around：每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍。<br><img src="https://kabumie.github.io/images/md_img/justify-content.png" alt="justify-content效果图"></p>
</blockquote>
<h4 id="5-align-items"><a href="#5-align-items" class="headerlink" title="5. align-items"></a>5. align-items</h4><p>设置副轴方向对其方式<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">  <span class="attribute">align-items</span>: flex-start | flex-end | center | baseline | stretch;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>flex-start：副轴的起点对齐<br>flex-end：副轴的终点对齐<br>center：副轴的中点对齐<br>baseline: 项目的第一行文字的基线对齐<br>stretch(默认值)：如果项目未设置高度或设为auto，将占满整个容器的高度<br><img src="https://kabumie.github.io/images/md_img/align-items.png" alt="align-items效果图"><br><em>这里只演示baseline效果，其它类似于justify-content的效果</em></p>
</blockquote>
<h4 id="6-align-content"><a href="#6-align-content" class="headerlink" title="6. align-content"></a>6. align-content</h4><p>在开启换行模式后有换行时设置多行在副轴方向的对齐方式，如果主轴只有一行则该属性无效<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">  <span class="attribute">align-content</span>: flex-start | flex-end | center | space-between | space-around | stretch;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>flex-start：与交叉轴的起点对齐<br>flex-end：与交叉轴的终点对齐<br>center：与交叉轴的中点对齐<br>space-between：与交叉轴两端对齐，轴线之间的间隔平均分布<br>space-around：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍<br>stretch(默认值)：轴线占满整个交叉轴<br><img src="https://kabumie.github.io/images/md_img/align-content.png" alt="align-content效果图"></p>
</blockquote>
<h3 id="子元素属性"><a href="#子元素属性" class="headerlink" title="子元素属性"></a>子元素属性</h3><blockquote>
<p>order<br>flex-grow<br>flex-shrink<br>flex-basis<br>flex<br>align-self</p>
</blockquote>
<h4 id="1-order-常用"><a href="#1-order-常用" class="headerlink" title="1. order (常用)"></a>1. order <em>(常用)</em></h4><p>定义子元素排列顺序，值为无单位整数，默认值为0，值越小越靠近起始位置<br><img src="https://kabumie.github.io/images/md_img/order.png" alt="order效果图"></p>
<h4 id="2-flex-grow"><a href="#2-flex-grow" class="headerlink" title="2. flex-grow"></a>2. flex-grow</h4><ul>
<li>定义子元素放大比例，只有在容器主轴方向大小大于子元素总大小时才有效果，即容器有空余，值为无单位非负数字，可设置浮点数，默认为0</li>
<li>当值为0时代表子元素不放大，如果容器有剩余空间则空出</li>
<li>如果有子元素 flex-grow 值不为0，则子元素会按照 flex-grow 值的比例放大并填充容器的剩余空间<br><img src="https://kabumie.github.io/images/md_img/flex-grow.png" alt="flex-grow效果图"><blockquote>
<p>具体计算方式：假设 A, B, C, D, E 的宽度分别是 100, 120, 130, 100, 100，父级的宽度是660，父级宽减去子级的全部宽度，这样剩余空间就是110。例子中B, C定义了flex-grow，分别是1，2，那剩余空间分成3份，B1份，C2份，比例就是1：2，分配计算出来的值就是B :36.666666666666664, C：73.33333333333333。这个时候剩余空间就被计算出来了，相加后的结果就是B：156.66666666666666，C：203.33333333333331。<br>B的计算公式：120 + (110 / 3) * 1<br>C的计算公式: 130 + (110 / 3) * 2</p>
</blockquote>
</li>
</ul>
<h4 id="3-flex-shrink"><a href="#3-flex-shrink" class="headerlink" title="3. flex-shrink"></a>3. flex-shrink</h4><ul>
<li>定义子元素缩小比例，只有在容器主轴方向大小小于子元素总大小且不换行时才有效果，即容器空间不足，值为无单位非负数字，可设置浮点数，默认为1</li>
<li>为0表示子元素不缩小，如果容器大小小于子元素总大小，而所有子元素均不缩小，则子元素会超出容器范围</li>
<li>如果有子元素 flex-shrink 值不为0，则子元素会按照 flex-shrink 值的比例缩小在容器中<br><img src="https://kabumie.github.io/images/md_img/flex-shrink.jpg" alt="flex-shrink效果图"><blockquote>
<p>具体计算方式：假设 A, B, C 的宽度分别是155, 200, 50。父级宽度是300，计算超出的空间就是 -105，这样超出的 105px 就要被 A, B, C 消化掉，比例是2：1：1。<br>首先把每个项目的wdith值乘以 flex-shrink 值求积<br>A：(155 * 2) = 310<br>B：(200 * 1) = 200<br>C：(50 * 1) = 50。<br>然后再求和所有项目的乘积<br>(310 + 200 + 50) = 560<br>得到求占比之后还要乘以要腾出的空间<br>A：(310 / 560) * 105 = 58.125<br>B：(200 / 560) * 105 = 37.5<br>C：(50 / 560) * 105 = 9.375<br>得到每一项要腾出的空间<br>A：(155 - 58.125) = 96.875<br>B：(200 - 37.5) = 162.5<br>C：(50 - 9.375) = 40.625<br>这就是 A, B, C 按比例缩小后的大小</p>
</blockquote>
</li>
</ul>
<h4 id="4-flex-basis"><a href="#4-flex-basis" class="headerlink" title="4. flex-basis"></a>4. flex-basis</h4><ul>
<li>本人对于 flex-basis 的意义并没有完全理解，个人感觉有点像是设置了一个 max-width (主轴x轴时)，很多人推荐在弹性布局中多使用 flex-basis 而不是直接设置 width height 属性，这个属性在下面的圣杯布局实例中有一次使用</li>
<li>它的默认值为 auto，表示项目的本来大小</li>
</ul>
<h4 id="5-flex-常用"><a href="#5-flex-常用" class="headerlink" title="5. flex (常用)"></a>5. flex <em>(常用)</em></h4><ul>
<li>flex-grow flex-shrink flex-basis 的联写，默认值为0 1 auto。后两个属性可选</li>
<li>该属性有两个快捷值：auto (1 1 auto) 和 none (0 0 auto)</li>
<li>通常直接用 flex 设置子元素比例大小，例如使用 flex: 1 直接设置大小比例，而不再单独写 flex-grow: 1</li>
</ul>
<h4 id="6-align-self-常用"><a href="#6-align-self-常用" class="headerlink" title="6. align-self (常用)"></a>6. align-self <em>(常用)</em></h4><ul>
<li>align-self 属性允许单个项目有与其他项目不一样的对齐方式，可覆盖 align-items 属性。默认值为 auto，表示继承父元素的 align-items 属性，如果没有父元素，则等同于 stretch(默认值)</li>
<li>除多出默认值 auto 外，属性值同 align-items<br><img src="https://kabumie.github.io/images/md_img/align-self.png" alt="align-self效果图"></li>
</ul>
<h2 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h2><h3 id="圣杯布局"><a href="#圣杯布局" class="headerlink" title="圣杯布局"></a>圣杯布局</h3><ul>
<li>圣杯布局是指在页面主体部分分为 left content right 3部分，left和right固定大小，content部分会自适应屏幕大小，后来国内的淘宝团队对其进行了改良，改良后效果基本相同，一般叫做双飞翼布局，使用搜索引擎搜索有很多相关介绍</li>
<li>本身圣杯布局是使用 float margin padding 和定位等盒模型方法实现的，关键点是使用负值的 margin 使left和right可以与设置为100%宽度的content浮动在同一行中，这里使用弹性布局则可以非常方便清晰的实现有自适应效果的圣杯布局</li>
</ul>
<p>html结构：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>css样式：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">* &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">html</span>,</div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.container</span> &#123;</div><div class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">    <span class="attribute">flex-direction</span>: column;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.header</span> &#123;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</div><div class="line">    <span class="attribute">background-color</span>: gray;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.content</span> &#123;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">3</span>;</div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.content</span> <span class="selector-class">.left</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: red;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">200px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.content</span> <span class="selector-class">.right</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: blue;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">200px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.content</span> <span class="selector-class">.middle</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: whitesmoke;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.footer</span> &#123;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</div><div class="line">    <span class="attribute">background-color</span>: gray;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@<span class="keyword">media</span> (max-width: <span class="number">768px</span>) &#123;</div><div class="line">    <span class="selector-class">.content</span> &#123;</div><div class="line">        <span class="attribute">flex-direction</span>: column;</div><div class="line">    &#125;</div><div class="line">    <span class="selector-class">.content</span> <span class="selector-class">.left</span>,</div><div class="line">    <span class="selector-class">.content</span> <span class="selector-class">.right</span>,</div><div class="line">    <span class="selector-class">.content</span> <span class="selector-class">.middle</span> &#123;</div><div class="line">        <span class="attribute">flex</span>: <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>效果图：<br><img src="https://kabumie.github.io/images/md_img/shengbei.jpg" alt="圣杯布局效果图"></p>
<blockquote>
<p>这里做了屏幕大小判断来适应移动端，在设置left和right宽度时使用的是 flex-basis，而不是 width，主要是因为在判断屏幕宽度小于768px时需要层叠掉left和right原本的固定宽度，让left和right可以自动填充整个屏宽，使用 flex-basis 可以在移动端样式中直接设置 flex: 1 使 flex-basis 变为 auto，如果使用 width，在需要去掉固定宽度时则比较麻烦<br>使用弹性布局不仅在宽度上达到自适应，在高度上也可以不受内容限制，直接填充满整个屏高</p>
</blockquote>
<h3 id="悬窗图片展示板"><a href="#悬窗图片展示板" class="headerlink" title="悬窗图片展示板"></a>悬窗图片展示板</h3><ul>
<li>利用弹性布局可以用很少的代码制作一个图片悬窗的图片展示板，弹性布局在处理宽高位置等方面非常方便，实用的demo有很多，这里就只展示一个悬窗案例</li>
</ul>
<p>html：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../img/mm.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum impedit ut officiis, nobis consequuntur fuga ipsam deleniti dolorem consequatur voluptatum saepe nam magni, aperiam voluptatibus officia. Sed facilis totam quis laborum laudantium cupiditate cumque, fuga illum asperiores alias libero quia, placeat debitis explicabo sint, rerum, at reiciendis inventore dolore officia!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>css：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">* &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.container</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">15px</span>;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">50px</span> auto;</div><div class="line">    <span class="attribute">background-color</span>: whitesmoke;</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.container</span> <span class="selector-tag">img</span> &#123;</div><div class="line">    <span class="attribute">margin-right</span>: <span class="number">15px</span>;</div><div class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.content</span> &#123;</div><div class="line">	<span class="attribute">flex</span>: <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.container</span> <span class="selector-tag">p</span> &#123;</div><div class="line">    <span class="attribute">font</span>: <span class="number">400</span> <span class="number">12px</span> <span class="string">"微软雅黑"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>效果图：<br><img src="https://kabumie.github.io/images/md_img/tupianzhanshi.png" alt="悬窗图片展示板效果图"></p>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>本文参考了<a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html?utm_source=tuicool" target="_blank" rel="external">阮一峰</a>的博客，并且很无耻的直接使用了其中的一些说明图片 ^-^ ；这里先谢阮大神，但是个人感觉阮一峰这篇博客对于一些属性的说明不太详细。<br>在 flex-grow 和 flex-shrink 的具体计算上直接使用了<a href="https://segmentfault.com/a/1190000006741711" target="_blank" rel="external">xiecg</a>的文章中的例子，因为这个例子写的实在是太棒了。</p>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2017/02/18/关于JavaScript中的事件代理/" >
  关于JavaScript中的事件代理
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2017/02/18/关于JavaScript中的事件代理/"><span class="article-date">
  2017-02-18
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h2 id="事件代理"><a href="#事件代理" class="headerlink" title="事件代理"></a>事件代理</h2><h3 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h3><ul>
<li>JavaScript高级程序设计 <em>(简称JS高程)</em> ：事件代理 <em>(事件委托)</em> 利用了事件冒泡，只指定一个事件处理程序，就可以管理某一类型的所有事件。</li>
</ul>
<h3 id="作用："><a href="#作用：" class="headerlink" title="作用："></a>作用：</h3><ol>
<li><p>减少与dom的交互次数，提高代码性能。 <em>(–代码性能–)</em></p>
<ul>
<li>在JavaScript中，添加到页面上的事件处理程序数量将直接关系到页面的整体运行性能，因为需要不断的与dom节点进行交互，访问dom的次数越多，引起浏览器重绘与重排的次数也就越多，就会延长整个页面的交互就绪时间，这就是为什么性能优化的主要思想之一就是要减少DOM操作；如果使用事件代理，就会将所有的操作放到js程序里面，与dom的操作就只需要交互一次，这样就能大大的减少与dom的交互次数，提高性能。</li>
<li>JS高程上关于代码优化中提到了：如果可能，在文档级别附加事件处理程序，这样可以处理整个页面的事件。</li>
</ul>
</li>
<li><p>动态生成DOM元素时，可通过事件代理给新增的元素添加事件函数。</p>
<ul>
<li>比如在异步获取后台数据加载页面时，直接给动态生成的DOM元素绑定事件函数可能需要在ajax交互时加入事件函数，这样往往会使得代码变得混乱，而使用事件代理则会非常方便。</li>
</ul>
</li>
</ol>
<h3 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h3><ul>
<li>事件冒泡：事件开始时由嵌套层次最深的节点开始接收，然后逐级向其父级节点传播。<ul>
<li>例：页面中有 div&gt;ul&gt;li&gt;p 的结构，当你 click 了 p 元素，click 事件首先在 p 元素上发生，然后，click 事件沿DOM树向上传播，分别在 li&gt;ul&gt;div 上发生，按照JS高程上的说明，最终会传播到 document 对象。</li>
<li>注：与事件冒泡对应的还有事件捕获。</li>
</ul>
</li>
<li>事件代理：利用事件冒泡原理，把事件函数绑定在父级元素上，再指定需要执行函数的子元素执行事件函数；在触发事件时，事件会依次冒泡到父级元素，从而触发绑定在父级元素的事件函数。<ul>
<li>对于事件代理原理的理解，阅读下面关于事件对象和具体用法的介绍后会更加清晰。</li>
</ul>
</li>
</ul>
<h3 id="用法："><a href="#用法：" class="headerlink" title="用法："></a>用法：</h3><p>1.原生JS</p>
<ul>
<li><p>事件对象：在触发DOM上的某个事件时，会产生一个事件对象 event，这个对象中包含着所有与事件有关的信息，在执行事件处理程序时 event 对象会被传入；只有在事件处理程序执行期间，event 对象才会存在；一旦事件处理程序执行完成，event 对象就会被销毁；对于事件代理，这里重点介绍下 event 的几个属性。</p>
<ul>
<li>currentTarget ：其事件函数当前正在处理事件的那个元素；如果感觉这个定义有点拗口，你可以暂且把 currentTarget 简单的理解为原生JS中事件函数内部的 this 。</li>
<li>target ：事件目标；即触发事件的实际目标。</li>
<li><p>这里用一个例子说明：假设页面中有 ul&gt;li&gt;p 的结构，然后点击 p 标签来执行下面代码<em>(这里为方便阅读没有做兼容性处理，此代码需要在chrome浏览器下运行)</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.querySelector(<span class="string">'ul'</span>);</div><div class="line"><span class="keyword">var</span> li = <span class="built_in">document</span>.querySelector(<span class="string">'li'</span>);</div><div class="line"><span class="keyword">var</span> p = <span class="built_in">document</span>.querySelector(<span class="string">'p'</span>);</div><div class="line"></div><div class="line">ul.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>);	<span class="comment">// &lt;ul&gt;...&lt;/ul&gt;</span></div><div class="line">	<span class="built_in">console</span>.log(event.currentTarget);	<span class="comment">// &lt;ul&gt;...&lt;/ul&gt;</span></div><div class="line">	<span class="built_in">console</span>.log(event.target);	<span class="comment">// &lt;p&gt;...&lt;/p&gt;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>从运行结果可以看到，当把事件函数绑定在父元素时，currentTarget 属性和函数内部的 this 都为绑定事件函数的父元素，而 target 属性的值则是我们想要触发事件的子元素。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>具体用法：给父元素绑定事件函数，然后通过条件判断找到需要执行事件函数的元素。</p>
</li>
</ul>
<p>页面结构如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;ul&gt;</div><div class="line">	&lt;li&gt;&lt;p id=<span class="string">"aaa"</span>&gt;AAA&lt;/p&gt;&lt;/li&gt;</div><div class="line">	&lt;li&gt;&lt;p id=<span class="string">"bbb"</span>&gt;BBB&lt;/p&gt;&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure></p>
<p>JS代码如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ul = <span class="built_in">document</span>.querySelector(<span class="string">'ul'</span>);</div><div class="line"><span class="keyword">var</span> li = <span class="built_in">document</span>.querySelector(<span class="string">'li'</span>);</div><div class="line"><span class="keyword">var</span> p = <span class="built_in">document</span>.querySelector(<span class="string">'p'</span>);</div><div class="line"></div><div class="line">ul.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">	<span class="comment">// 兼容性处理</span></div><div class="line">	<span class="keyword">var</span> e = e || <span class="built_in">window</span>.event;</div><div class="line">	<span class="keyword">var</span> target = e.target || e.srcElement;</div><div class="line"></div><div class="line">	<span class="keyword">switch</span> (target.id)&#123;</div><div class="line">		<span class="keyword">case</span> <span class="string">"aaa"</span>:</div><div class="line">			alert(<span class="string">"AAA"</span>);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">"bbb"</span>:</div><div class="line">			alert(<span class="string">"BBB"</span>);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">default</span> :</div><div class="line">			alert(<span class="string">"未点击 p 标签"</span>);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>从测试结果可以看到，只在父元素上绑定一次事件函数，通过条件判断可以分别找到父元素下触发事件的子元素，然后分别进行操作。</p>
</blockquote>
<p>2.jQuery</p>
<ul>
<li>jQuery 的 on 方法中已经封装好了事件代理的功能，而且事件函数内部的 this 直接指向的就是被指定的元素。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// on 的3个参数 1.事件类型 2.给事件指定的元素 3.事件函数</span></div><div class="line">    $(<span class="string">"div"</span>).on(<span class="string">"click"</span>, <span class="string">"p"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        alert(<span class="string">"p"</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);	<span class="comment">// p</span></div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p>注意 jQuery 的 on 方法中 this 直接指向的就是触发事件的子元素 p 。</p>
</blockquote>
<h3 id="结尾："><a href="#结尾：" class="headerlink" title="结尾："></a>结尾：</h3><ul>
<li>原生JS中的一些事件如 onmouseover 存在一些不好用的问题，同时通过 target 等属性进行筛选又需要写不少条件判断的代码，相比下jQuery 的 on 方法则封装得简单直接，但是这里并非单纯推荐使用第三方库，实际应用中要根据具体需求做选择。</li>
</ul>
<p>本文参考了《JavaScript高级程序设计》和 <em>凌云之翼</em> 的博客，《JavaScript高级程序设计》真的是一本很好的教材 :)</p>

        
      </div>
    </div>

  






          <div class="main-footer">
  
    © 2017 kabumie 的博客 - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>
<script src="/scripts/main.js"></script>

</body>
</html>
